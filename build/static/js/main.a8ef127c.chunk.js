(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var c=a(0),r=a.n(c),n=a(22),s=a.n(n),o=a(6),d=a(2),i=a(56);function j(e,t){switch(t.type){case"LOGIN":case"REGISTER":return{username:t.username,access_token:t.access_token};case"LOGOUT":return{username:void 0,access_token:void 0};default:return e}}function u(e,t){switch(t.type){case"CREATE_TODO":return[{title:t.title,description:t.description,dateCreated:t.dateCreated,completed:t.completed,dateCompleted:t.dateCompleted,id:t.id,author:t.author}].concat(Object(i.a)(e));case"TOGGLE_TODO":return e.map((function(e){return e.id===t.id&&e.completed?Object(d.a)(Object(d.a)({},e),{},{completed:!1,dateCompleted:""}):e.id!==t.id||e.completed?e:Object(d.a)(Object(d.a)({},e),{},{completed:!0,dateCompleted:Date(Date.now()).toString()})}));case"DELETE_TODO":return e.filter((function(e){return e.id!==t.id}));case"FETCH_TODOS":return t.todos;default:return e}}function l(e,t){return{user:j(e.user,t),todos:u(e.todos,t)}}var b=a(9),O=a(11),h=a(1);function p(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),a=t[0],r=t[1],n=Object(c.useState)(""),s=Object(o.a)(n,2),d=s[0],i=s[1],j=Object(c.useState)(!1),u=Object(o.a)(j,2),l=u[0],p=u[1],x=Object(c.useState)(""),m=Object(o.a)(x,2),f=m[0],g=m[1];var v=Object(O.b)((function(e){var t=e.title,a=e.description,c=e.dateCreated,r=e.completed,n=e.dateCompleted,s=e.author;return{url:"/todo",method:"post",headers:{Authorization:"".concat(D.user.access_token)},data:{title:t,description:a,dateCreated:c,completed:r,dateCompleted:n,author:s}}})),C=Object(o.a)(v,2),w=C[0],y=C[1],T=Object(c.useContext)(b.a),D=T.state,E=T.dispatch,S=D.user;return Object(c.useEffect)((function(){w&&!1===w.isLoading&&w.data&&E({type:"CREATE_TODO",title:w.data.title,description:w.data.description,dateCreated:w.data.dateCreated,completed:w.data.completed,dateCompleted:w.data.dateCompleted,id:w.data.id,author:S.username})}),[w]),Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),y({title:a,description:d,dateCreated:Date(Date.now()).toString(),completed:l,dateCompleted:f,author:S.username})},children:[Object(h.jsxs)("div",{children:["Author: ",Object(h.jsx)("b",{children:S.username})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"create-title",children:"Todo Item Title:"}),Object(h.jsx)("input",{type:"text",value:a,onChange:function(e){r(e.target.value)},name:"create-title",id:"create-title",required:!0})]}),Object(h.jsx)("textarea",{value:d,onChange:function(e){i(e.target.value)}}),Object(h.jsx)("input",{type:"submit",value:"Create"}),Object(h.jsx)("div",{children:Object(h.jsxs)("label",{children:[" Already Completed? Click Here!",Object(h.jsx)("input",{type:"checkbox",name:"box-id",value:l,checked:l,onClick:function(e){p(!l),g(!0===l?"":Date(Date.now()).toString())}})]})})]})}var x=a(10),m=a(108),f=a(106),g=a(103);function v(e){var t=e.show,a=e.handleClose,r=Object(x.d)(),n=Object(c.useContext)(b.a).dispatch,s=Object(c.useState)(""),d=Object(o.a)(s,2),i=d[0],j=d[1],u=Object(c.useState)(!1),l=Object(o.a)(u,2),p=l[0],v=l[1],C=Object(c.useState)(""),w=Object(o.a)(C,2),y=w[0],T=w[1];var D=Object(O.b)((function(e,t){return{url:"auth/login",method:"post",data:{username:e,password:t}}})),E=Object(o.a)(D,2),S=E[0],k=E[1];return Object(c.useEffect)((function(){S&&!1===S.isLoading&&(S.data||S.error)&&(S.error?(v(!0),alert("Login failed, please try again")):(v(!1),console.log(S.data),n({type:"LOGIN",username:i,access_token:S.data.access_token}),r.navigate("/users/".concat(i))))}),[S]),Object(h.jsx)(m.a,{show:t,onHide:a,children:Object(h.jsxs)(f.a,{onSubmit:function(e){e.preventDefault(),k(i,y),a()},children:[Object(h.jsx)(m.a.Header,{closeButton:!0,children:Object(h.jsx)(m.a.Title,{children:"Login"})}),Object(h.jsxs)(m.a.Body,{children:[Object(h.jsx)(f.a.Label,{htmlFor:"login-username",children:"Username:"}),Object(h.jsx)(f.a.Control,{type:"text",value:i,onChange:function(e){j(e.target.value)},name:"login-username",id:"login-username"}),Object(h.jsx)(f.a.Label,{htmlFor:"login-password",children:"Password:"}),Object(h.jsx)(f.a.Control,{type:"password",value:y,onChange:function(e){T(e.target.value)},name:"login-password",id:"login-password"}),p&&Object(h.jsx)(f.a.Text,{style:{color:"red"},children:"Invalid username or password"})]}),Object(h.jsxs)(m.a.Footer,{children:[Object(h.jsx)(g.a,{variant:"secondary",onClick:a,children:"Cancel"}),Object(h.jsx)(g.a,{variant:"primary",disabled:0===i.length,type:"submit",children:"Login"})]})]})})}function C(e){var t=e.show,a=e.handleClose,r=Object(x.d)(),n=Object(c.useContext)(b.a).dispatch,s=Object(c.useState)({username:"",password:"",passwordRepeat:""}),i=Object(o.a)(s,2),j=i[0],u=i[1],l=Object(c.useState)(""),p=Object(o.a)(l,2),v=(p[0],p[1]),C=Object(O.b)((function(e,t){return{url:"auth/register",method:"post",data:{username:e,password:t,passwordConfirmation:t}}})),w=Object(o.a)(C,2),y=w[0],T=w[1];return Object(c.useEffect)((function(){y&&y.data&&(n({type:"REGISTER",username:y.data.username}),r.navigate("/users/".concat(y.data.username)))}),[y]),Object(c.useEffect)((function(){y&&!1===y.isLoading&&(y.data||y.error)&&(y.error?(console.log(y),v("Registration failed, please try again later."),alert("fail")):(console.log(y),v("Registration successful. You may now login."),alert("You have registered successfully, now routing to your profile page...")))}),[y]),Object(h.jsx)(m.a,{show:t,onHide:a,children:Object(h.jsxs)(f.a,{onSubmit:function(e){e.preventDefault(),T(j.username,j.password),a()},children:[Object(h.jsx)(m.a.Header,{closeButton:!0,children:Object(h.jsx)(m.a.Title,{children:"Register"})}),Object(h.jsxs)(m.a.Body,{children:[Object(h.jsx)(f.a.Label,{htmlFor:"register-username",children:"Username:"}),Object(h.jsx)(f.a.Control,{type:"text",value:j.username,onChange:function(e){return u(Object(d.a)(Object(d.a)({},j),{},{username:e.target.value}))},name:"register-username",id:"register-username"}),Object(h.jsx)(f.a.Label,{htmlFor:"register-password",children:"Password:"}),Object(h.jsx)(f.a.Control,{type:"password",name:"register-password",id:"register-password",value:j.password,onChange:function(e){return u(Object(d.a)(Object(d.a)({},j),{},{password:e.target.value}))}}),Object(h.jsx)(f.a.Label,{htmlFor:"register-password-repeat",children:"Repeat password:"}),Object(h.jsx)(f.a.Control,{type:"password",name:"register-password-repeat",id:"register-password-repeat",value:j.passwordRepeat,onChange:function(e){return u(Object(d.a)(Object(d.a)({},j),{},{passwordRepeat:e.target.value}))}})]}),Object(h.jsxs)(m.a.Footer,{children:[Object(h.jsx)(g.a,{variant:"secondary",onClick:a,children:"Cancel"}),Object(h.jsx)(g.a,{variant:"primary",type:"submit",disabled:0===j.username.length||0===j.password.length||j.password!==j.passwordRepeat,children:"Register"})]})]})})}function w(){var e=r.a.lazy((function(){return a.e(3).then(a.bind(null,110))})),t=Object(c.useContext)(b.a).state,n=Object(c.useState)(!1),s=Object(o.a)(n,2),d=s[0],i=s[1],j=Object(c.useState)(!1),u=Object(o.a)(j,2),l=u[0],O=u[1];return t.user.username?Object(h.jsx)(e,{}):Object(h.jsxs)("div",{className:"justify-content-end",children:[Object(h.jsx)(g.a,{variant:"link",onClick:function(e){return i(!0)},children:"Login"}),Object(h.jsx)(v,{show:d,handleClose:function(){return i(!1)}}),Object(h.jsx)(g.a,{variant:"link",onClick:function(e){return O(!0)},children:"Register"}),Object(h.jsx)(C,{show:l,handleClose:function(){return O(!1)}})]})}var y=a(107),T=function(e){var t=e.text;return Object(h.jsx)(x.a,{href:"/",children:Object(h.jsx)(y.a.Brand,{style:{color:"darkslateblue"},children:t})})},D=a(109);function E(e){var t=e.title,a=e.description,c=e.dateCreated,r=e.completed,n=e.dateCompleted,s=e.id,o=e.author;return Object(h.jsx)(D.a,{children:Object(h.jsxs)(D.a.Body,{children:[Object(h.jsx)(D.a.Title,{children:t}),Object(h.jsx)(D.a.Subtitle,{children:Object(h.jsxs)("i",{children:["Written by ",Object(h.jsx)("b",{children:o})]})}),Object(h.jsxs)(D.a.Text,{children:[Object(h.jsx)("div",{children:a}),Object(h.jsxs)("div",{children:["Todo ID: ",s]}),Object(h.jsxs)("div",{children:[" Date created: ",c," "]}),Object(h.jsx)("div",{children:Object(h.jsxs)("label",{children:[" Completed?",Object(h.jsx)("input",{type:"checkbox",name:"box-id",value:r,checked:r,onChange:function(e){r=!r}})]})}),Object(h.jsxs)("div",{children:[" ",r&&Object(h.jsxs)("text",{children:[" Date completed: ",n," "]})]})]}),Object(h.jsx)(x.a,{href:"/users/".concat(o),children:"View author page"})]})})}function S(e){var t=e.todos,a=void 0===t?[]:t;return Object(h.jsx)("div",{children:a.map((function(e,t){return Object(c.createElement)(E,Object(d.a)(Object(d.a)({},e),{},{key:"post-"+t}))}))})}function k(){var e=Object(c.useContext)(b.a),t=e.state,a=e.dispatch,r=Object(c.useState)(),n=Object(o.a)(r,2),s=n[0],i=n[1],j=t.todos;var u=Object(O.b)((function(e){var t=e.id,a=e.completed,c=e.dateCompleted;return{url:"/todos/".concat(parseInt(t)),method:"patch",data:{id:t,completed:a,dateCompleted:c}}})),l=Object(o.a)(u,2),p=l[0],x=l[1];return Object(c.useEffect)((function(){p&&p.data&&!1===p.isLoading&&a({type:"TOGGLE_TODO",id:p.id,completed:p.completed,dateCompleted:p.dateCompleted})}),[p]),Object(h.jsx)("form",{onSubmit:function(e){e.preventDefault(),function(e){var t=j.find((function(t){return t.id===e}));try{t.completed=!t.completed,t.completed?t.dateCompleted=Date(Date.now()).toString():t.dateCompleted="",x(Object(d.a)({},t))}catch(a){console.log("This todo ID does not exist")}}(parseInt(s))},children:Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"toggle-id",children:"Todo Item ID To Be Toggled:"}),Object(h.jsx)("input",{type:"text",value:s,onChange:function(e){i(e.target.value)},name:"toggle-id",id:"toggle-id"}),Object(h.jsx)("input",{type:"submit",value:"Toggle"})]})})}function L(){var e=Object(c.useContext)(b.a).dispatch,t=Object(c.useState)(),a=Object(o.a)(t,2),r=a[0],n=a[1];var s=Object(O.b)((function(e){var t=e.id;return{url:"/todos/".concat(parseInt(t)),method:"delete",data:{id:t}}})),d=Object(o.a)(s,2),i=d[0],j=d[1];return Object(c.useEffect)((function(){e({type:"DELETE_TODO",id:parseInt(r)})}),[i]),Object(h.jsx)("form",{onSubmit:function(e){e.preventDefault(),j({id:r})},children:Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{htmlFor:"delete-id",children:"Todo Item ID To Be Deleted:"}),Object(h.jsx)("input",{type:"text",value:r,onChange:function(e){n(e.target.value)},name:"delete-id",id:"delete-id"}),Object(h.jsx)("input",{type:"submit",value:"Delete"})]})})}function I(e){var t=e.author,a=Object(c.useContext)(b.a),r=a.state,n=a.dispatch,s=r.user,d=Object(O.b)((function(){return{url:"/todos?author=".concat(t),method:"get"}})),i=Object(o.a)(d,2),j=i[0],u=i[1];function l(e){return e===t}Object(c.useEffect)(u,[]),Object(c.useEffect)((function(){j&&j.data&&n({type:"FETCH_TODOS",todos:j.data.reverse()})}),[j]);var m=j.data,f=j.isLoading;return Object(h.jsxs)(h.Fragment,{children:[l(s.username)&&Object(h.jsx)(p,{})," ",Object(h.jsx)("br",{}),l(s.username)&&Object(h.jsx)(k,{})," ",Object(h.jsx)("br",{}),l(s.username)&&Object(h.jsx)(L,{})," ",Object(h.jsx)("br",{}),f&&"Todos loading..."," ",Object(h.jsx)(S,{todos:m}),Object(h.jsx)("div",{children:Object(h.jsx)(x.a,{href:"/",children:"Go back to homepage"})})]})}function R(e){var t=e.username,a=e.id;return Object(h.jsxs)("div",{children:[Object(h.jsxs)(x.a,{href:"".concat(t),children:[" ",t," "]}),Object(h.jsxs)("div",{children:["User Unique ID: ",a]}),Object(h.jsx)("br",{})]})}function F(e){var t=e.users,a=void 0===t?[]:t;return console.log(a),Object(h.jsx)("div",{children:a.map((function(e,t){return Object(c.createElement)(R,Object(d.a)(Object(d.a)({},e),{},{username:e.username,id:e._id,key:"user-"+t}))}))})}function _(){var e=Object(c.useContext)(b.a),t=(e.state,e.dispatch,Object(O.b)((function(){return{url:"/users",method:"get"}}))),a=Object(o.a)(t,2),r=a[0],n=a[1];Object(c.useEffect)(n,[]);r.data;var s=r.isLoading;return Object(h.jsxs)(h.Fragment,{children:[s&&"Users loading..."," ",Object(h.jsx)(F,{users:r.data}),Object(h.jsx)("div",{children:Object(h.jsx)(x.a,{href:"/",children:"Go back to homepage"})})]})}var G=a(104),B=a(105);function H(){Object(c.useContext)(b.a).state;return Object(h.jsx)(y.a,{bg:"light",expand:"lg",children:Object(h.jsxs)(G.a,{children:[Object(h.jsx)(y.a.Brand,{href:"/",children:Object(h.jsx)(T,{text:"My Todo List - Homepage"})}),Object(h.jsx)(y.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(h.jsxs)(y.a.Collapse,{id:"basic-navbar-nav",children:[Object(h.jsx)(B.a,{className:"me-auto",children:Object(h.jsx)(B.a.Link,{children:Object(h.jsx)(x.a,{href:"/users",children:"Access Users Page"})})}),Object(h.jsx)(r.a.Suspense,{fallback:"Loading...",children:Object(h.jsx)(w,{})})]})]})})}function U(){var e=Object(c.useContext)(b.a),t=(e.state,e.dispatch),a=Object(O.b)((function(){return{url:"/todos",method:"get"}})),r=Object(o.a)(a,2),n=r[0],s=r[1];Object(c.useEffect)(s,[]),Object(c.useEffect)((function(){n&&n.data&&t({type:"FETCH_TODOS",todos:n.data.reverse()})}),[n]);var d=n.data,i=n.isLoading;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(p,{})," ",Object(h.jsx)("br",{}),Object(h.jsx)(k,{})," ",Object(h.jsx)("br",{}),Object(h.jsx)(L,{})," ",Object(h.jsx)("br",{}),i&&"Todos loading..."," ",Object(h.jsx)(S,{todos:d})]})}var A=a(12);var N=function(){var e=Object(c.useReducer)(l,{user:{},todos:[]}),t=Object(o.a)(e,2),a=t[0],r=t[1],n=(a.user,Object(A.f)({"/":Object(A.g)({view:Object(h.jsx)(U,{})}),"/users":Object(A.g)({view:Object(h.jsx)(_,{})}),"/users/:author":Object(A.g)((function(e){return{view:Object(h.jsx)(I,{author:e.params.author})}}))}));return Object(h.jsx)("div",{children:Object(h.jsxs)(b.a.Provider,{value:{state:a,dispatch:r},children:[Object(h.jsx)(x.b,{routes:n,children:Object(h.jsxs)(G.a,{children:[Object(h.jsx)(H,{}),Object(h.jsx)("hr",{}),Object(h.jsx)(x.c,{})]})}),Object(h.jsx)("br",{}),Object(h.jsx)("br",{})]})})},P=a(37),q=a.n(P).a.create({baseURL:"/"});s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(O.a,{value:q,children:Object(h.jsx)(N,{})})}),document.getElementById("root"))},9:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var c=a(0),r=a.n(c).a.createContext({state:{},dispatch:function(){}})}},[[100,1,2]]]);
//# sourceMappingURL=main.a8ef127c.chunk.js.map